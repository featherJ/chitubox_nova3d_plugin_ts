module.exports=function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=20)}([function(e,t){e.exports=require("fs")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToRGBA=t.isColorRGBA=t.colorRGBA=void 0;const o=r(5),n=r(6),i=r(3),c=r(7);function a(e){return!("object"!=typeof e||!Array.isArray(e))&&4===e.length&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b&&"number"==typeof e.a}t.colorRGBA=function(e,t,r,o){const n=[e,t,r,o];return Object.defineProperty(n,"r",{get(){return this[0]}}),Object.defineProperty(n,"g",{get(){return this[1]}}),Object.defineProperty(n,"b",{get(){return this[2]}}),Object.defineProperty(n,"a",{get(){return this[3]}}),n},t.isColorRGBA=a,t.convertToRGBA=function(e,t){return a(e)?e:i.isColorRGB(e)?i.convertRGBToRGBA(e):n.isColorGrayScale(e)?n.convertGrayScaleToRGBA(e):o.isColorGrayScaleAlpha(e)?o.convertGrayScaleAlphaToRGBA(e):c.isColorPalette(e)?c.convertPaletteToRGBA(e,t):void 0}},function(e,t){e.exports=require("path")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertRGBToRGBA=t.isColorRGB=t.colorRGB=void 0;const o=r(1);t.colorRGB=function(e,t,r){const o=[e,t,r];return Object.defineProperty(o,"r",{get(){return this[0]}}),Object.defineProperty(o,"g",{get(){return this[1]}}),Object.defineProperty(o,"b",{get(){return this[2]}}),o},t.isColorRGB=function(e){return!("object"!=typeof e||!Array.isArray(e))&&3===e.length&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b},t.convertRGBToRGBA=function(e){return o.colorRGBA(e.r,e.g,e.b,255)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.__native_fill=t.__native_copy=t.__native_resize=t.__native_isPng=t.__native_encode=t.__native_PngImage=void 0,r(0);let o=r(25).type().toLocaleLowerCase();var n=null;-1!=o.indexOf("windows")?n=null:-1!=o.indexOf("darwin")&&(n=r(26)),t.__native_PngImage=n.__native_PngImage,t.__native_encode=n.__native_encode,t.__native_isPng=n.__native_isPng,t.__native_resize=n.__native_resize,t.__native_copy=n.__native_copy,t.__native_fill=n.__native_fill},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertGrayScaleAlphaToRGBA=t.isColorGrayScaleAlpha=t.colorGrayScaleAlpha=void 0;const o=r(1);t.colorGrayScaleAlpha=function(e,t){const r=[e,t];return Object.defineProperty(r,"gray",{get(){return this[0]}}),Object.defineProperty(r,"a",{get(){return this[1]}}),r},t.isColorGrayScaleAlpha=function(e){return!("object"!=typeof e||!Array.isArray(e))&&2===e.length&&"number"==typeof e.gray&&"number"==typeof e.a},t.convertGrayScaleAlphaToRGBA=function(e){return o.colorRGBA(e.gray,e.gray,e.gray,e.a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertGrayScaleToRGBA=t.isColorGrayScale=t.colorGrayScale=void 0;const o=r(1);t.colorGrayScale=function(e){const t=[e];return Object.defineProperty(t,"gray",{get(){return this[0]}}),t},t.isColorGrayScale=function(e){return!("object"!=typeof e||!Array.isArray(e))&&1===e.length&&"number"==typeof e.gray},t.convertGrayScaleToRGBA=function(e){return o.colorRGBA(e.gray,e.gray,e.gray,255)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertPaletteToRGBA=t.isColorPalette=t.colorPalette=void 0;const o=r(3);t.colorPalette=function(e){const t=[e];return Object.defineProperty(t,"index",{get(){return this[0]}}),t},t.isColorPalette=function(e){return!("object"!=typeof e||!Array.isArray(e))&&1===e.length&&"number"==typeof e.index},t.convertPaletteToRGBA=function(e,t){if(t.has(e.index))return o.convertRGBToRGBA(t.get(e.index))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isXY=t.xy=void 0,t.xy=function(e,t){const r=[e,t];return Object.defineProperty(r,"x",{get(){return this[0]}}),Object.defineProperty(r,"y",{get(){return this[1]}}),r},t.isXY=function(e){return!("object"!=typeof e||!Array.isArray(e))&&2===e.length&&"number"==typeof e.x&&"number"==typeof e.y}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PngImage=t.convertNativeBackgroundColor=t.convertNativeTime=t.InterlaceType=void 0;const o=r(10),n=r(11),i=r(8),c=r(13),a=r(12),s=r(4);function l(e){if(!e)return;const{year:t,month:r,day:o,hour:n,minute:i,second:c}=e;return new Date(t,r-1,o,n,i,c)}function u(e,t){if(e)switch(t){case a.ColorType.GRAY_SCALE:case a.ColorType.GRAY_SCALE_ALPHA:return n.colorGrayScale(e.gray);case a.ColorType.PALETTE:return n.colorPalette(e.index);case a.ColorType.RGB:case a.ColorType.RGBA:const{red:t,green:r,blue:o}=e;return n.colorRGB(t,r,o);default:return}}!function(e){e.NONE="none",e.ADAM7="adam7",e.UNKNOWN="unknown"}(t.InterlaceType||(t.InterlaceType={})),t.convertNativeTime=l,t.convertNativeBackgroundColor=u,t.PngImage=class{constructor(e){if(!Buffer.isBuffer(e))throw new Error("Error decoding PNG. Input is not a buffer.");const t=new s.__native_PngImage(e);this.bitDepth=t.bitDepth,this.channels=t.channels,this.colorType=t.colorType,this.height=t.height,this.width=t.width,this.interlaceType=t.interlaceType,this.rowBytes=t.rowBytes,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.pixelsPerMeterX=t.pixelsPerMeterX,this.pixelsPerMeterY=t.pixelsPerMeterY,this.data=t.data,this.palette=function(e){if(e)return e.reduce((e,t,r)=>(e.set(r,n.colorRGB(t.red,t.green,t.blue)),e),new Map)}(t.palette),this.gamma=t.gamma,this.time=l(t.time),this.backgroundColor=u(t.backgroundColor,this.colorType)}get alpha(){switch(this.colorType){case a.ColorType.RGBA:case a.ColorType.GRAY_SCALE_ALPHA:return!0;default:return!1}}get bytesPerPixel(){const e=Math.ceil(this.bitDepth/8);switch(this.colorType){case a.ColorType.GRAY_SCALE_ALPHA:return 2*e;case a.ColorType.RGBA:return 4*e;case a.ColorType.GRAY_SCALE:case a.ColorType.PALETTE:return 1*e;case a.ColorType.RGB:return 3*e;default:return}}toIndex(e,t){return(e+t*this.width)*this.bytesPerPixel}toXY(e){const t=e/this.bytesPerPixel,r=Math.floor(t%this.width),o=Math.floor(t/this.width);return i.xy(r,o)}at(e,t){const r=this.toIndex(e,t);if(r>this.data.length||r<0)throw new Error("Index out of range when reading pixel from image.");const{data:o}=this;switch(this.colorType){case a.ColorType.GRAY_SCALE:return n.colorGrayScale(o[r]);case a.ColorType.GRAY_SCALE_ALPHA:return n.colorGrayScaleAlpha(o[r],o[r+1]);case a.ColorType.PALETTE:return n.colorPalette(o[r]);case a.ColorType.RGB:return n.colorRGB(o[r],o[r+1],o[r+2]);case a.ColorType.RGBA:return n.colorRGBA(o[r],o[r+1],o[r+2],o[r+3]);default:return}}rgbaAt(e,t){return n.convertToRGBA(this.at(e,t),this.palette)}crop(e){this.resizeCanvas({clip:e,dimensions:e.dimensions})}resizeCanvas({dimensions:e,offset:t,clip:r,fillColor:o}){const a=void 0===t?i.xy(0,0):t,l=void 0===e?i.xy(this.width,this.height):e,u=void 0===r?c.rect(0,0,this.width,this.height):r,h=void 0===o?n.defaultBackgroundColor(this.colorType):o;if(void 0!==o&&!n.colorTypeToColorChecker(this.colorType)(o))throw new Error("Fill color must be of same color type as image.");if(l.x<1||l.y<1)throw new Error("Invalid dimensions.");if(a.x+u.width>l.x||a.y+u.height>l.y)throw new Error("Dimensions and offset are out of range for new dimensions.");if(u.x+u.width>this.width||u.y+u.height>this.height)throw new Error("Provided clipping rectangle is out of range for current dimensions.");if(u.x<0||u.y<0||u.width<1||u.height<1)throw new Error("Invalid clipping rectangle.");if(a.x<0||a.y<0)throw new Error("Invalid offset.");const d=s.__native_resize(this.data,this.width,this.height,...l,...a,...u,h,this.bitDepth);this.data=d,this.width=l.x,this.height=l.y}copyFrom(e,t,r){const o=void 0===t?i.xy(0,0):t,n=void 0===r?c.rect(0,0,e.width,e.height):r;if(n.x<0||n.y<0||n.width<1||n.height<1)throw new Error("Invalid source rectangle.");if(o.x<0||o.y<0)throw new Error("Invalid offset.");if(e.colorType!==this.colorType)throw new Error("Cannot copy from image with different color type.");if(n.x+n.width>e.width||n.y+n.height>e.height)throw new Error("Provided source rectangle is out of range for source image.");if(n.width+o.x>this.width||n.height+o.y>this.height)throw new Error("Provided source rectangle and offset are out of range for this image.");s.__native_copy(e.data,this.data,e.width,e.height,this.width,this.height,...n,...o)}fill(e,t){const r=void 0===t?c.rect(0,0,this.width,this.height):t;if(void 0===e)throw new Error("Fill color must be specified.");if(!n.colorTypeToColorChecker(this.colorType)(e))throw new Error("Fill color must be of same color type as image.");if(r.x<0||r.y<0||r.x+r.width>this.width||r.y+r.height>this.height)throw new Error("Provided area is out of range for this image.");s.__native_fill(this.data,this.width,this.height,...r,e,this.bitDepth)}set(e,t){this.fill(e,c.rect(t.x,t.y,1,1))}encode(){const{alpha:e,width:t,height:r}=this;if(this.colorType!==a.ColorType.RGB&&this.colorType!==a.ColorType.RGBA)throw new Error("Can only encode images with RGB or RGBA color type.");return o.encode(this.data,{width:t,height:r})}write(e,t){const{alpha:r,width:n,height:i}=this;if(this.colorType!==a.ColorType.RGB&&this.colorType!==a.ColorType.RGBA)throw new Error("Can only encode images with RGB or RGBA color type.");return o.writePngFile(e,this.data,{width:n,height:i},t)}writeSync(e){const{alpha:t,width:r,height:n}=this;if(this.colorType!==a.ColorType.RGB&&this.colorType!==a.ColorType.RGBA)throw new Error("Can only encode images with RGB or RGBA color type.");return o.writePngFileSync(e,this.data,{width:r,height:n})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writePngFileSync=t.writePngFile=t.encode=void 0;const o=r(0),n=r(4);function i(e,t){if(!Buffer.isBuffer(e))throw new Error("Input is not a buffer.");if("object"!=typeof t||null===t)throw new Error("Options need to be an object.");let{width:r,height:o,compressionLevel:i=9}=t;if("number"!=typeof r||"number"!=typeof o)throw new Error("Error encoding PNG. Width and height need to be specified.");if(!Number.isInteger(r))throw new Error("Error encoding PNG. Width needs to be an integer.");if(!Number.isInteger(o))throw new Error("Error encoding PNG. Height needs to be an integer.");if(!Number.isInteger(i)||i<0||i>9)throw new Error("Error encoding PNG. CompressionLevel needs to be an integer between 0 and 9.");const c=e.length/(r*o);if(3!==c&&4!==c)throw new Error("Error encoding PNG. Unsupported color type.");const a=4===c;return n.__native_encode(e,r,o,a,i)}t.encode=i,t.writePngFile=function(e,t,r,n){if("function"!=typeof n)return new Promise((n,c)=>{let a;try{a=i(t,r)}catch(e){return void c(e)}o.writeFile(e,a,e=>{e?c(e):n()})});{let c;try{c=i(t,r)}catch(e){return void n(e)}o.writeFile(e,c,n)}},t.writePngFileSync=function(e,t,r){o.writeFileSync(e,i(t,r))}},function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultBackgroundColor=t.colorTypeToColorChecker=void 0;const i=r(12),c=r(5),a=r(6),s=r(7),l=r(3),u=r(1);n(r(5),t),n(r(6),t),n(r(7),t),n(r(3),t),n(r(1),t),t.colorTypeToColorChecker=function(e){switch(e){case i.ColorType.GRAY_SCALE:return a.isColorGrayScale;case i.ColorType.GRAY_SCALE_ALPHA:return c.isColorGrayScaleAlpha;case i.ColorType.PALETTE:return s.isColorPalette;case i.ColorType.RGB:return l.isColorRGB;case i.ColorType.RGBA:return u.isColorRGBA;default:return}},t.defaultBackgroundColor=function(e){switch(e){case i.ColorType.GRAY_SCALE:return a.colorGrayScale(255);case i.ColorType.GRAY_SCALE_ALPHA:return c.colorGrayScaleAlpha(0,0);case i.ColorType.PALETTE:return s.colorPalette(0);case i.ColorType.RGB:return l.colorRGB(255,255,255);case i.ColorType.RGBA:return u.colorRGBA(0,0,0,0);default:return}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorType=void 0,function(e){e.GRAY_SCALE="gray-scale",e.RGB="rgb",e.PALETTE="palette",e.GRAY_SCALE_ALPHA="gray-scale-alpha",e.RGBA="rgba",e.UNKNOWN="unknown"}(t.ColorType||(t.ColorType={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRect=t.rect=void 0;const o=r(8);t.rect=function(e,t,r,n){let i,c,a,s;o.isXY(e)&&o.isXY(t)?(i=e.x,c=e.y,a=t.x,s=t.y):(i=e,c=t,a=r,s=n);const l=[i,c,a,s];return Object.defineProperty(l,"x",{get(){return this[0]}}),Object.defineProperty(l,"y",{get(){return this[1]}}),Object.defineProperty(l,"width",{get(){return this[2]}}),Object.defineProperty(l,"height",{get(){return this[3]}}),Object.defineProperty(l,"offset",{get(){return o.xy(this[0],this[1])}}),Object.defineProperty(l,"dimensions",{get(){return o.xy(this[2],this[3])}}),l},t.isRect=function(e){return!("object"!=typeof e||!Array.isArray(e)||4!==e.length||"number"!=typeof e.x||"number"!=typeof e.y||"number"!=typeof e.width||"number"!=typeof e.height||!o.isXY(e.offset)||!o.isXY(e.dimensions))}},,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConverterProcess=void 0;const o=r(21),n=r(22);class i extends o.NodeProcess{constructor(){super(),this._imageConverter=null,this._imageConverter=new n.ImageConverter}convert(e){return new Promise((t,r)=>{try{this._imageConverter.convertImage(e),t(e)}catch(e){r(e)}})}}t.ConverterProcess=i,new i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeProcess=void 0;t.NodeProcess=class extends class{constructor(){this.message_handler=this.message_handler.bind(this),process.addListener("message",this.message_handler)}message_handler(e){var t=e.args,r=e.funcName,o=e.callIndex;if(r in this){var n=this[r].apply(this,t);n instanceof Promise?n.then(e=>{this.callResult(r,o,e)},e=>{this.callError(r,o,e)}):this.callResult(r,o,n)}else this.callNull(r,o)}callResult(e,t,r){this.doSend({type:"result",funcName:e,callIndex:t,result:r})}callError(e,t,r){this.doSend({type:"error",funcName:e,callIndex:t,error:r})}callNull(e,t){this.doSend({type:"null",funcName:e,callIndex:t})}doSend(e){process.send(e)}send(e,t){this.doSend({type:"custom",messageId:e,data:t})}exit(e){process.exit(e)}}{}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageConverter=void 0;const o=r(23),n=r(2),i=r(0);t.ImageConverter=class{constructor(){}convertImage(e){for(var t=o.readPngFileSync(e.path),r=Math.floor(t.width/3),c=Math.floor(t.height),a=Buffer.alloc(r*c*3),s=0;s<t.height;s++)for(var l=0,u=0;u<t.width;u+=3){var h=(t.width*s+u)*t.channels,d=(t.width*s+u+1)*t.channels,f=(t.width*s+u+2)*t.channels,y=t.data[h],p=t.data[d],g=t.data[f],v=3*(r*s+l);a[v]=y,a[v+1]=p,a[v+2]=g,l++}for(var P=e.index-1+"";P.length<5;)P="0"+P;var _="nova3d"+P+".png",w=n.dirname(e.path),b=n.join(w,_);o.writePngFileSync(b,a,{width:r,height:c,compressionLevel:1}),i.unlinkSync(e.path)}}},function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(24);Object.defineProperty(t,"readPngFile",{enumerable:!0,get:function(){return i.readPngFile}}),Object.defineProperty(t,"readPngFileSync",{enumerable:!0,get:function(){return i.readPngFileSync}}),Object.defineProperty(t,"decode",{enumerable:!0,get:function(){return i.decode}});var c=r(10);Object.defineProperty(t,"writePngFile",{enumerable:!0,get:function(){return c.writePngFile}}),Object.defineProperty(t,"writePngFileSync",{enumerable:!0,get:function(){return c.writePngFileSync}}),Object.defineProperty(t,"encode",{enumerable:!0,get:function(){return c.encode}});var a=r(9);Object.defineProperty(t,"PngImage",{enumerable:!0,get:function(){return a.PngImage}});var s=r(28);Object.defineProperty(t,"isPng",{enumerable:!0,get:function(){return s.isPng}}),n(r(11),t),n(r(13),t),n(r(8),t)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readPngFileSync=t.readPngFile=t.decode=void 0;const o=r(0),n=r(9);t.decode=function(e){return new n.PngImage(e)},t.readPngFile=function(e,t){if("function"!=typeof t)return new Promise((t,r)=>o.readFile(e,(e,o)=>{if(e)return void r(e);let i;try{i=new n.PngImage(o)}catch(e){return void r(e)}t(i)}));o.readFile(e,(e,r)=>{if(e)return void t(e);let o;try{o=new n.PngImage(r)}catch(e){return void t(e)}t(null,o)})},t.readPngFileSync=function(e){return new n.PngImage(o.readFileSync(e))}},function(e,t){e.exports=require("os")},function(e,t,r){(function(e){try{process.dlopen(e,__dirname+"/"+r.p+"a153a69edacfd6f0659c0ec9e929b9f9.node")}catch(e){throw new Error("node-loader:\n"+e)}}).call(this,r(27)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPng=void 0;const o=r(4);t.isPng=function(e){return o.__native_isPng(e)}}]);